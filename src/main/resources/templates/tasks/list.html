<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
 <head>
  <meta charset="UTF-8">
   <title>タスク一覧</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
 </head>
 <body class="bg-white">
  <div class="container py-5">
   <h1 class="text-center fw-bold mb-4">タスク一覧</h1>
	<div class="d-flex justify-content-end mb-3">
	 <a class="btn btn-success" th:href="@{/tasks/new}">+新規作成</a>
	</div>
		
	<!--tasksが空の時-->
    <div class="alert alert-info d-flex align-items-center"
		 th:if="${#lists.isEmpty(tasks)}"
		  role="alert">
    <div class="text-center">📬 現在タスクは登録されいていません。「新規作成」から追加してください。</div>
	</div>
		
	<!--tasksがある時-->
	<div class="table-responsive" th:if="${!#lists.isEmpty(tasks)}">
	 <table class="table table-hover align-middle">
	  <thead class="table-dark">
	   <tr>
	    <th>ID</th>
		<th>タイトル</th>
		<th>内容</th>
		<th>登録者</th>
		<th>開始日</th>	
		<th>終了日</th>
		<th>作成日時</th>
		<th>更新日時</th>
		<th>操作</th>	
	   </tr>
	  </thead>
	      
	  <tbody>
	   <tr th:each="t:${tasks}">
		<td th:text="${t.id}"></td>
	    <td th:text="${t.title}"></td>
		<td th:text="${t.content}"></td>
		<td th:text="${t.name}"></td>
		<td th:text="${t.startDate}"></td>
		<td th:text="${t.endDate}"></td>
        <td th:text="${#temporals.format(t.createdAt, 'yyyy-MM-dd HH:mm')}"></td>
        <td th:text="${#temporals.format(t.updatedAt, 'yyyy-MM-dd HH:mm')}"></td>

	   <td>
	    <a class="btn btn-sm btn-primary me-1"
	     th:href="@{/tasks/edit/{id}(id=${t.id})}">編集</a>
			     
	   <form class="d-inline"
	     th:action="@{/tasks/delete/{id}(id=${t.id})}"
			method="post"
		  onsubmit="return confirm('削除します。よろしいですか？');">
	   <button type="submit" class="btn btn-sm btn-danger">削除</button>
	   </form>
	   </td>
	   </tr>
	   </tbody>
      </table>
       <nav th:if="${totalPages > 1}">
        <ul class="pagination justify-content-center">
         <li class="page-item" th:classappend="${page == 1} ? 'disabled'">
          <a class="page-link" th:href="@{/tasks(page=${page-1})}">前</a>
         </li>

         <li class="page-item"
           th:each="p : ${#numbers.sequence(1, totalPages)}"
           th:classappend="${p == page} ? 'active'">
          <a class="page-link" th:href="@{/tasks(page=${p})}" th:text="${p}"></a>
         </li>

         <li class="page-item" th:classappend="${page == totalPages} ? 'disabled'">
          <a class="page-link" th:href="@{/tasks(page=${page+1})}">次</a>
         </li>
        </ul>
       </nav>
	</div>	
   </div>	
　</body>
</html>